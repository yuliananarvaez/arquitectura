<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel Emprendedor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #productForm, #editProductForm, #ordersSection {
      transition: all 0.3s ease;
    }
    .profile-menu {
      transition: all 0.3s ease;
      max-height: 0;
      overflow: hidden;
    }
    .profile-menu.open {
      max-height: 300px;
    }
  </style>
</head>
<body class="bg-gray-50">
  <nav class="bg-blue-400 p-4 text-white flex justify-between items-center">
    <span class="font-bold text-xl">SheMarket</span>
    <div class="flex items-center space-x-4">
      <a href="index.html" class="px-4 hover:text-green-200">Salir</a>
    </div>
  </nav>
  
  <div class="flex flex-col md:flex-row">
    <!-- Barra lateral de perfil -->
    <div class="w-full md:w-64 bg-white p-6 shadow-md">
      <div class="text-center mb-4">
        <div class="w-24 h-24 rounded-full bg-gray-200 mx-auto mb-3 overflow-hidden">
          <img 
            src="static/emprendedor.jpg" 
            alt="Foto de perfil" 
            class="w-full h-full object-cover"
          >
        </div>
        <h2 id="profileName" class="text-xl font-bold text-gray-800">Emprendedor Ejemplo</h2>
        <p id="profileEmail" class="text-gray-600">emprendedor@example.com</p>
      </div>
      <div class="space-y-2">
        <button 
          onclick="openEditProfileModal()"
          class="w-full bg-green-100 text-green-600 hover:bg-green-200 px-4 py-2 rounded-lg transition-colors"
        >
          Editar Perfil
        </button>
        <button 
          onclick="openDeleteAccountModal()"
          class="w-full bg-red-100 text-red-600 hover:bg-red-200 px-4 py-2 rounded-lg transition-colors"
        >
          Eliminar Cuenta
        </button>
      </div>
    </div>

    <!-- Contenido principal -->
    <main class="flex-1 p-4">
      <h1 class="text-2xl font-bold mb-4">Mis Productos</h1>
      
      <!-- Botón para mostrar formulario -->
      <button onclick="toggleProductForm()" class="mb-4 bg-blue-400 hover:bg-blue-600 text-white px-4 py-2 rounded">
        + Publicar Nuevo Producto
      </button>
      
      <!-- Formulario de producto -->
      <div id="productForm" class="hidden bg-white p-4 rounded shadow mb-4">
        <h2 class="text-lg font-semibold mb-2">Nuevo Producto</h2>
        <input type="text" id="prodName" placeholder="Nombre del producto" class="w-full mb-2 px-3 py-2 border rounded" required>
        <textarea id="prodDescription" placeholder="Descripción" class="w-full mb-2 px-3 py-2 border rounded" required></textarea>
        <input type="number" id="prodPrice" placeholder="Precio ($)" class="w-full mb-2 px-3 py-2 border rounded" required>
        <input type="file" id="prodImage" accept="image/*" class="w-full mb-2" required>
        <div class="flex">
          <button onclick="publishProduct()" class="bg-blue-400 text-white px-4 py-2 rounded flex-1 mr-2">Publicar Producto</button>
          <button onclick="toggleProductForm()" class="bg-gray-400 text-white px-4 py-2 rounded flex-1">Cancelar</button>
        </div>
      </div>
      
      <!-- Lista de productos -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="myProducts">
        <!-- Productos se añadirán aquí -->
      </div>
      
      <!-- Botón para mostrar pedidos -->
      <button onclick="toggleOrdersSection()" class="mt-8 bg-gray-400 hover:bg-gray-600 text-white px-4 py-2 rounded flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd" />
        </svg>
        Mis Pedidos
      </button>
      
      <!-- Sección de pedidos (oculta inicialmente) -->
      <div id="ordersSection" class="hidden bg-white p-4 rounded shadow mt-4">
        <h2 class="text-xl font-semibold mb-4">Pedidos Recibidos</h2>
        
        <!-- Filtros -->
        <div class="flex flex-wrap gap-4 mb-4">
          <select class="px-3 py-2 border rounded">
            <option>Todos los estados</option>
            <option>Pendientes</option>
            <option>En proceso</option>
            <option>Enviados</option>
            <option>Entregados</option>
          </select>
          <input type="date" class="px-3 py-2 border rounded" placeholder="Filtrar por fecha">
          <button class="bg-blue-400 text-white px-4 py-2 rounded">Filtrar</button>
        </div>
        
        <!-- Lista de pedidos -->
        <div class="space-y-4">
          <!-- Pedido 1 -->
          <div class="border rounded-lg p-4">
            <div class="flex justify-between items-start">
              <div>
                <p class="font-bold">Pedido #001</p>
                <p class="text-sm text-gray-600">Fecha: 15/05/2023</p>
              </div>
              <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Pendiente</span>
            </div>
            
            <div class="mt-2">
              <p class="font-semibold">Productos:</p>
              <ul class="list-disc pl-5 mt-1">
                <li>Camiseta básica (x2) - $25.000 c/u</li>
                <li>Taza personalizada (x1) - $18.000</li>
              </ul>
            </div>
            
            <div class="mt-3 flex justify-between items-center">
              <p class="font-bold">Total: $68.000</p>
              
              <div class="flex space-x-2">
                <select class="px-2 py-1 border rounded text-sm">
                  <option value="pendiente">Pendiente</option>
                  <option value="proceso">En proceso</option>
                  <option value="enviado">Enviado</option>
                  <option value="entregado">Entregado</option>
                </select>
                <button onclick="updateOrderStatus(1)" class="bg-blue-400 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                  Actualizar
                </button>
                <button onclick="generateInvoice(1)" class="bg-gray-400 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm">
                  Factura
                </button>
              </div>
            </div>
          </div>
          
          <!-- Pedido 2 -->
          <div class="border rounded-lg p-4">
            <div class="flex justify-between items-start">
              <div>
                <p class="font-bold">Pedido #002</p>
                <p class="text-sm text-gray-600">Fecha: 10/05/2023</p>
              </div>
              <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Entregado</span>
            </div>
            
            <div class="mt-2">
              <p class="font-semibold">Productos:</p>
              <ul class="list-disc pl-5 mt-1">
                <li>Zapatos deportivos (x1) - $120.000</li>
              </ul>
            </div>
            
            <div class="mt-3 flex justify-between items-center">
              <p class="font-bold">Total: $120.000</p>
              
              <div class="flex space-x-2">
                <select class="px-2 py-1 border rounded text-sm" disabled>
                  <option value="entregado" selected>Entregado</option>
                </select>
                <button onclick="viewOrderDetails(2)" class="bg-gray-400 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm">
                  Detalles
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal Editar Perfil -->
  <div id="editProfileModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
      <h2 class="text-xl font-bold mb-4 text-center">Editar Perfil</h2>
      
      <form id="editProfileForm" class="space-y-4">
        <div>
          <label class="block text-gray-700 mb-2">Nombre:</label>
          <input 
            type="text" 
            id="editName"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
            required
          >
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2">Correo electrónico:</label>
          <input 
            type="email" 
            id="editEmail"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
            required
          >
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2">Nueva contraseña (opcional):</label>
          <input 
            type="password" 
            id="editPassword"
            placeholder="Dejar en blanco para no cambiar"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
          >
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2">Confirmar contraseña actual:</label>
          <input 
            type="password" 
            id="currentPassword"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
            required
          >
        </div>
        
        <div class="flex space-x-2">
          <button 
            type="submit"
            class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Guardar Cambios
          </button>
          <button 
            type="button"
            onclick="closeEditProfileModal()"
            class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Eliminar Cuenta -->
  <div id="deleteAccountModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
      <h2 class="text-xl font-bold mb-4 text-center">Eliminar Cuenta</h2>
      <p class="text-gray-700 mb-6">¿Estás seguro que deseas eliminar tu cuenta? Se enviará una solicitud al administrador para aprobar esta acción.</p>
      
      <form id="deleteAccountForm" class="space-y-4">
        <div>
          <label class="block text-gray-700 mb-2">Contraseña actual:</label>
          <input 
            type="password" 
            id="deletePassword"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
            required
          >
        </div>
        
        <div class="flex space-x-2">
          <button 
            type="submit"
            class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Solicitar Eliminación
          </button>
          <button 
            type="button"
            onclick="closeDeleteAccountModal()"
            class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Editar Producto -->
  <div id="editProductModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
      <h2 class="text-xl font-bold mb-4 text-center">Editar Producto</h2>
      
      <form id="editProductForm" class="space-y-4">
        <input type="hidden" id="editProdId">
        <div>
          <label class="block text-gray-700 mb-2">Nombre:</label>
          <input 
            type="text" 
            id="editProdName"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
            required
          >
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2">Descripción:</label>
          <textarea 
            id="editProdDescription"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
            required
          ></textarea>
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2">Precio:</label>
          <input 
            type="number" 
            id="editProdPrice"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
            required
          >
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2">Imagen (dejar en blanco para no cambiar):</label>
          <input 
            type="file" 
            id="editProdImage"
            accept="image/*"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
          >
        </div>
        
        <div class="flex space-x-2">
          <button 
            type="submit"
            class="flex-1 bg-blue-400 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Guardar Cambios
          </button>
          <button 
            type="button"
            onclick="closeEditProductModal()"
            class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Datos del usuario (simulados)
    let userData = {
      name: "Emprendedor Ejemplo",
      email: "emprendedor@example.com",
      password: "password123" // En una app real esto nunca se almacena así
    };

    // Base de datos de productos (simulada)
    let products = [];
    let currentEditProductId = 0;

    // Mostrar/ocultar formulario
    function toggleProductForm() {
      const form = document.getElementById('productForm');
      form.classList.toggle('hidden');
    }
    
    // Publicar producto
    function publishProduct() {
      const name = document.getElementById('prodName').value;
      const description = document.getElementById('prodDescription').value;
      const price = document.getElementById('prodPrice').value;
      const imageFile = document.getElementById('prodImage').files[0];
      
      if (!name || !description || !price || !imageFile) {
        alert('Por favor completa todos los campos');
        return;
      }
      
      // Crear objeto de producto
      const product = {
        id: Date.now(), // ID único
        name,
        description,
        price: parseFloat(price),
        image: URL.createObjectURL(imageFile),
        status: 'Pendiente de aprobación'
      };
      
      // Añadir producto a la lista
      products.push(product);
      addProductToList(product);
      
      // Limpiar formulario
      document.getElementById('prodName').value = '';
      document.getElementById('prodDescription').value = '';
      document.getElementById('prodPrice').value = '';
      document.getElementById('prodImage').value = '';
      
      // Ocultar formulario
      toggleProductForm();
      
      alert('¡Producto publicado! Está pendiente de aprobación por el administrador.');
    }
    
    // Añadir producto a la lista visual
    function addProductToList(product) {
      const productsContainer = document.getElementById('myProducts');
      const productElement = document.createElement('div');
      productElement.className = 'bg-white p-4 rounded shadow relative';
      productElement.innerHTML = `
        <img src="${product.image}" class="w-full h-40 object-cover mb-2">
        <h3 class="font-semibold">${product.name}</h3>
        <p class="text-gray-600 text-sm">${product.description}</p>
        <p class="font-bold">$${product.price.toLocaleString()}</p>
        <p class="text-sm ${product.status.includes('Pendiente') ? 'text-yellow-600' : 'text-green-600'}">
          ${product.status}
        </p>
        <div class="flex justify-end space-x-2 mt-2">
          <button onclick="openEditProductModal(${product.id})" class="text-blue-500 hover:text-blue-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
            </svg>
          </button>
          <button onclick="confirmDeleteProduct(${product.id})" class="text-red-500 hover:text-red-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
          </button>
        </div>
      `;
      productsContainer.prepend(productElement);
    }
    
    // Mostrar/ocultar sección de pedidos
    function toggleOrdersSection() {
      const section = document.getElementById('ordersSection');
      section.classList.toggle('hidden');
    }

    // Actualizar estado de pedido
    function updateOrderStatus(orderId) {
      // Aquí iría la lógica para actualizar el estado del pedido
      alert(`Estado del pedido #${orderId} actualizado`);
    }

    // Generar factura
    function generateInvoice(orderId) {
      // Aquí iría la lógica para generar la factura
      const invoice = `=== FACTURA ===\n\nPedido: #${orderId}\nFecha: ${new Date().toLocaleDateString()}\n\nProductos:\n- Camiseta básica (x2) - $50.000\n- Taza personalizada (x1) - $18.000\n\nTotal: $68.000\n\nGracias por tu compra!`;
      alert(invoice);
    }

    // Ver detalles de pedido
    function viewOrderDetails(orderId) {
      // Aquí iría la lógica para mostrar detalles completos del pedido
      alert(`Mostrando detalles del pedido #${orderId}`);
    }
    
    // Abrir modal editar perfil
    function openEditProfileModal() {
      document.getElementById('editProfileModal').classList.remove('hidden');
      // Cargar datos actuales
      document.getElementById('editName').value = userData.name;
      document.getElementById('editEmail').value = userData.email;
    }

    // Cerrar modal editar perfil
    function closeEditProfileModal() {
      document.getElementById('editProfileModal').classList.add('hidden');
    }

    // Abrir modal eliminar cuenta
    function openDeleteAccountModal() {
      document.getElementById('deleteAccountModal').classList.remove('hidden');
    }

    // Cerrar modal eliminar cuenta
    function closeDeleteAccountModal() {
      document.getElementById('deleteAccountModal').classList.add('hidden');
    }

    // Abrir modal editar producto
    function openEditProductModal(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;
      
      document.getElementById('editProdId').value = product.id;
      document.getElementById('editProdName').value = product.name;
      document.getElementById('editProdDescription').value = product.description;
      document.getElementById('editProdPrice').value = product.price;
      
      document.getElementById('editProductModal').classList.remove('hidden');
    }

    // Cerrar modal editar producto
    function closeEditProductModal() {
      document.getElementById('editProductModal').classList.add('hidden');
    }

    // Confirmar eliminación de producto
    function confirmDeleteProduct(productId) {
      if (confirm('¿Estás seguro que deseas eliminar este producto?')) {
        deleteProduct(productId);
      }
    }

    // Eliminar producto
    function deleteProduct(productId) {
      products = products.filter(p => p.id !== productId);
      renderProducts();
      alert('Producto eliminado correctamente');
    }

    // Renderizar todos los productos
    function renderProducts() {
      const productsContainer = document.getElementById('myProducts');
      productsContainer.innerHTML = '';
      products.forEach(addProductToList);
    }

    // Guardar cambios de perfil
    document.getElementById('editProfileForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const name = document.getElementById('editName').value;
      const email = document.getElementById('editEmail').value;
      const newPassword = document.getElementById('editPassword').value;
      const currentPassword = document.getElementById('currentPassword').value;
      
      // Validar contraseña actual
      if (currentPassword !== userData.password) {
        alert('La contraseña actual es incorrecta');
        return;
      }
      
      // Actualizar datos
      userData.name = name;
      userData.email = email;
      
      if (newPassword) {
        userData.password = newPassword;
      }
      
      // Actualizar UI
      document.getElementById('profileName').textContent = userData.name;
      document.getElementById('profileEmail').textContent = userData.email;
      
      closeEditProfileModal();
      alert('Perfil actualizado correctamente');
    });

    // Solicitar eliminación de cuenta
    document.getElementById('deleteAccountForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const password = document.getElementById('deletePassword').value;
      
      // Validar contraseña
      if (password !== userData.password) {
        alert('La contraseña es incorrecta');
        return;
      }
      
      // Simular envío de solicitud al admin
      alert('Se ha enviado una solicitud al administrador para eliminar tu cuenta. Te notificaremos cuando se procese.');
      closeDeleteAccountModal();
    });

    // Guardar cambios de producto
    document.getElementById('editProductForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const productId = parseInt(document.getElementById('editProdId').value);
      const name = document.getElementById('editProdName').value;
      const description = document.getElementById('editProdDescription').value;
      const price = parseFloat(document.getElementById('editProdPrice').value);
      const imageFile = document.getElementById('editProdImage').files[0];
      
      const productIndex = products.findIndex(p => p.id === productId);
      if (productIndex === -1) return;
      
      // Actualizar producto
      products[productIndex].name = name;
      products[productIndex].description = description;
      products[productIndex].price = price;
      
      if (imageFile) {
        products[productIndex].image = URL.createObjectURL(imageFile);
      }
      
      renderProducts();
      closeEditProductModal();
      alert('Producto actualizado correctamente');
    });

    // Añadir productos de ejemplo al cargar
    window.onload = function() {
      // Cargar datos de usuario
      document.getElementById('profileName').textContent = userData.name;
      document.getElementById('profileEmail').textContent = userData.email;
      
      // Productos de ejemplo
      products = [
        {
          id: 1,
          name: "Camiseta básica",
          description: "Camiseta 100% algodón, varios colores",
          price: 25000,
          image: "static/camiseta.jpg",
          status: "Aprobado"
        },
        {
          id: 2,
          name: "Taza personalizada",
          description: "Taza de cerámica con diseño personalizado",
          price: 18000,
          image: "static/taza.jpg",
          status: "Aprobado"
        }
      ];
      
      renderProducts();
    };
  </script>
</body>
</html>